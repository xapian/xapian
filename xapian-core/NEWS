<HTML>
<HEAD>
<TITLE>Overview of Changes in Xapian 0.5.0</TITLE>
</HEAD>
<BODY TEXT=black BGCOLOR=white>
The last release of the software that is now known as Xapian was 
OmSee 0.4.1 on November 24th 2000, not far from 2 years ago.

<P>
There's been a significant amount of development in this time,
so we've summarised the most notable changes and improvements:

<ul>
<li>
The project is now called "Xapian".  We've renamed the modules in the
light of this change:
  
<ul>
<li> "om" is now "xapian-core"
<li> "om-examples" is now "xapian-examples", and now contains small,
    instructive examples which demonstrate how to use Xapian to implement
    particularly features.
<li> Added "xapian-applications" which contains larger sample applications
</ul>

<li> Much improved build system - should now build "out of the box" on many
  Unix platforms.  Can now VPATH build with vendor tools on most platforms.
  Builds as cleanly as we can achieve with GCC 2.95.* (some bogus warnings due
  to compiler bugs).  Should build without warnings on GCC 3.0, 3.1,
  and 3.2.

<li> If using GCC, om/om.h now contains a check that the compiler used to
build Xapian and the compiler used to build the application have compatible
C++ ABIs.  So you get a clear error message early from the first attempt to
compile a file rather than a confusing error from the linker near the end
of the build.

<li> RPM packages are now available.  We intend to prepare Debian packages
  in the near future too.

<li> xapian-config no longer support "--uninst".  It's hard to make this work
reliably and portably, and the effort is better expended elsewhere.  Configure
with a prefix and install to a temporary directory instead.

<li> Xapian can now work with files > 2Gb on OSes which support them.

<li> Restructured and reworked documentation.

<li> Removed thread locks.  We
 intend to be "thread-friendly" so different threads can access
  different objects without problems.  In the rare event that you want
  to concurrently call methods on the <em>same object</em> from different
  threads you need to create a mutex and lock it.
  Thus the thread lock overhead is only incurred when it's necessary.

<li> Indexgraph removed from core library.  It will reappear as an add-on
library at some point.
  
<li> Omega's query parser has now been reworked as a separate library.

<li> Terminology change - "keys" are now known as "values" to avoid confusion,
  since they're not like keys in a relational database.  The exception is
  when a value is used as a key in some operation, e.g.  "match_collapse_key".

<li>Database backends:

<ul>
<li> Auto backend: can now be used to create a new database.

<li> Auto backend: added support for "stub" databases - a text file
specifying the settings for the database to be opened (particularly
useful for allowing easy access to specific remote databases).

<li> Quartz backend: many fixes and improvements, and the code has been cleaned
up a lot.  Implemented deleting of items from postlists.

<li> Remote backend: implemented term_exists() and get_termfreq();

<li> Multi-backend: the document length is now fetched from the sub-postlist
  rather than the database, which provides a huge speed-up in some cases.

<li> Sleepycat backend: this experimental backend has been removed.

<li> Muscat 3.6 backends: now disabled by default.
</ul>

<li> Tests:

<ul>
<li> Test cases added for most bug fixes and new features.

<li> stemtest: rewritten in C++ rather than part C++, part perl.  Now 15%
   faster.

<li> includetest: removed - it's no longer useful now the code has matured.

<li> Removed problematic leak checking from testsuite.  We plan to use valgrind
  instead soon.

</ul>
<li> Matcher:

<ul>

<li> Fixed several matcher bugs which could cause incorrect results in
  some situations.

<li> Fix bug in expander due to nth_element being called on the wrong element.

<li> Added sorting within relevance bands to the matcher.

<li> Matcher now calculates percentages differently, such that 100% relevance is
  actually achievable.

<li> Matcher now uses a min-heap rather than nth-element to maintain the
  proto-mset.  This is cleaner and more efficient.

<li> New operator OP_ELITE_SET replaces match_max_or_terms option.

<li> Implemented multiple XOR queries.

<li> Add a new query operator, OP_WEIGHT_CUTOFF, which returns only
  those documents from a query which have a weight greater than a
  specified cutoff value.

<li> Removed OmBatchEnquire from system: it may return at a later date,
  but for now it is simply out of date and a maintainance liability,
  and gives no significant advantage.

<li> Added experimental match bias functors.

</ul>

<li> The API has been cleaned up in various places:

<ul>
<li> OmDocumentContents and OmIndexDoc merged to become OmDocument
<li> OmQuery interface cleaned up
<li> OmData and OmKey removed - methods which used them now just pass a string instead
<li> OmESetItem replaced by OmESetIterator; OmMSetItem by OmMSetIterator;
om_termname_list by OmTermIterator
<li> OmDocumentTerm and OmDocumentParams removed
<li> OmMSet::mbound replaced by
  OmMSet::matches_{lower_bound,estimated,upper_bound}, giving more information
<li> Xapian iterators now have default constructors
<li> Most API classes now have reference counted internals, so assignment and copying are cheap
<li> OmStem now has copy constructor and assignment operator
<li> and more...
</ul>

</ul> </body> </html>
