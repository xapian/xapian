$httpheader{Content-Type,text/html; charset=utf-8}<!DOCTYPE html><html lang="en">
$set{flag_spelling,$ne{$cgi{SPELL},0}}
$set{thousand,$.}$set{decimal,.}
$setmap{prefix,,$split{ S B F},title,S,author,A,topic,B}
${
$def{PREV,
$if{$ne{$topdoc,0},<input type=image name="&lt;" alt="&lt;"
src="/icons/omega/prev.png" height=30 width=30>,
<img alt="" src="/icons/omega/prevoff.png" height=30 width=30>}
}

$def{NEXT,
$if{$ne{$last,$msize},<input type=image name="&gt;" alt="&gt;"
src="/icons/omega/next.png" height=30 width=30>,
<img alt="" src="/icons/omega/nextoff.png" height=30 width=30>}
}

$def{P,<input type=image name="$1" value="$1" src="/icons/omega/page-$2.png" $opt{a} alt="$1">}
$def{PAGE,$if{$gt{$1,9},$if{$gt{$1,99},$P{$1,$div{$1,100}}}$P{$1,$mod{$div{$1,10},10}}}$P{$1,$mod{$1,10}}}

$def{S,<img src="/icons/omega/page-$2s.png" $opt{a} alt=$1>}
$def{SPAGE,$if{$gt{$1,9},$if{$gt{$1,99},$S{$1,$div{$1,100}}}$S{$1,$mod{$div{$1,10},10}}}$S{$1,$mod{$1,10}}}
}

$def{PREV,$if{$ne{$topdoc,0},<li><input type=submit name="&lt;" value="Previous"></li>}}

$def{PAGE,<li><input type=submit name="[" value="$1"></li>}

$def{SPAGE,<li><input type=submit name="[" value="$1" disabled=disabled></li>}

$def{NEXT,$if{$ne{$last,$msize},<li><input type=submit name="&gt;" value="Next"></li>}}

<head>
<title>$if{$query,Omega Search: $html{$query},Omega Search}</title>
$if{$opt{topterms},$include{inc/toptermsjs}}
<style>
$include{styles.css}
</style>
<script type="text/javascript"><!--
function f2(n) {return (n>9?"":"0")+n;}
function write_date(time_t) {
var d=new Date();d.setTime(time_t*1000);
var D=d.getFullYear()+"-"+f2(d.getMonth()+1)+"-"+f2(d.getDate());
var T=f2(d.getHours())+":"+f2(d.getMinutes())+":"+f2(d.getSeconds());
var ISO=d.toISOString();
document.write("<span>Modified:<time datetime=\""+ISO+"\" title=\""+D+" "+T+"\">"+D+"</time></span>");
}
// -->
</script>
</head>
<body>
<form id="form" name=P method=get
action="$html{$or{$env{SCRIPT_NAME},omega}}" target="_top">
${Search Control - shows search button, options and textbox}
<fieldset class="search">
<input id="omega-autofocus" type=search name=P value="$html{$query}" placeholder="Search..." size=65 autofocus>
<script>
if (!("autofocus" in document.createElement("input")))
 document.getElementById("omega-autofocus").focus();
</script>
<input type=submit value="Search">
</fieldset>
${Todo: Replace radios with search buttons}
<fieldset class="options">$if{,$include{inc/anyalldropbox},
$include{inc/anyallradio}}</fieldset>
${Suggestions - shows suggested terms to improve query}
$if{$opt{topterms},
 <fieldset class="suggested-terms" title="Suggested terms to add to your query">
 $map{$topterms,<span style="white-space:nowrap"><input type=checkbox name=X value="$html{$prettyterm{$_}}" onClick="C(this)">$html{$prettyterm{$_}}</span> }
 <noscript><input type=hidden name=ADD value=1></noscript>
 </fieldset>
}
$if{$suggestion,Did you mean: <a class="suggestion" href="$html{$or{$env{SCRIPT_NAME},omega}?DB=$url{$dbname}&P=$url{$suggestion}$if{$ne{$hitsperpage,10},&HITSPERPAGE=$hitsperpage}$if{$fmt,&FMT=$url{$fmt}}$if{$cgi{COLLAPSE},&COLLAPSE=$url{$cgi{COLLAPSE}}}$map{$relevants,&R=$_}$if{$cgi{THRESHOLD},&THRESHOLD=$url{$cgi{THRESHOLD}}}$map{$cgilist{B},&B=$url{$_}}&SPELL=0}">$html{$suggestion}</a>}
${Query metadata - shows query performance or document size}
$or{$html{$error},
<p class="metadata">
$if{$eq{$msize,0},
$if{$query,No documents match your query,
Searching $nice{$dbsize} documents
}</p>,
$if{$not{$msizeexact},
 $nice{$add{$topdoc,1}}-$nice{$last} of about $nice{$msize} matches,
 $if{$and{$eq{$last,$msize},$eq{$topdoc,0}},
  All $nice{$msize} matches,
  $nice{$add{$topdoc,1}}$if{$ne{$add{$topdoc,1},$last},-$nice{$last}} of exactly $nice{$msize} matches}
}
<br/>
$list{$map{$queryterms,$list{$html{$uniq{$unstem{$_}}},,/,}:&nbsp;$nice{$freq{$_}}},Term frequencies: ,$. ,}. Search took $time seconds
</p>
${Results}
<table>
$hitlist{<tr class="result"><td class="metadata">
${<img src="/icons/omega/score-$div{$percentage,10}.png" alt="$percentage%" height=16 width=32>}
<div class="relevance-container" title="$percentage%" >
<div class="relevance" style='width:$div{$mul{$percentage,6},10}px;'>
</div></div>
<div class="content">
$if{$and{$field{modtime},$ne{$field{modtime},-1}},
<script type="text/javascript">write_date($add{$field{modtime}});</script>
<noscript>
<span>Modified:<time title="$html{$date{$field{modtime},%Y-%m-%d %H:%M:%S}}" datetime="$html{$date{$field{modtime},%Y-%m-%dT%H:%M:%S}}">
$html{$date{$field{modtime},%Y-%m-%d}}</time></span>
</noscript>
}
$if{$field{language},Language: $html{$field{language}}}
$if{$field{size},<span title="$html{$field{size}} bytes">Size:$html{$filesize{$field{size}}}</span>}
<div title="Mark this document as relevant">
<input type=checkbox name=R value=$id$if{$relevant, checked}>
</div>
</div>
</td>
<td class="data"><header><a href="$html{$field{url}}">$html{$or{$field{caption},$field{title},$prettyurl{$field{url}},Untitled}}</a></header>
<span>
$highlight{$snippet{$field{sample}},$terms}$if{$field{sample},...}</span>
<a href="$html{$field{url}}">$html{$field{url}}</a>
<span>
matching:
$list{$map{$terms,$html{$prettyterm{$_}}},$., and }</span></td></tr>}
</table>

${Navigation Buttons}
${suppress next, prev, and page links if there's only one page}
$if{$ne{$lastpage,1},
<ul class="pagination">
$set{a,$if{$opt{pagelink_height}, HEIGHT=$opt{pagelink_height}}$if{$opt{pagelink_width}, WIDTH=$opt{pagelink_width}}}

${1-W ... X-(this)-Y ...}
$set{w,$min{3,$add{$thispage,-1}}}
$set{x,$max{$add{$opt{w},1},$add{$thispage,-3}}}
$set{y,$min{$lastpage,$add{$thispage,8}}}
$PREV
$map{$range{1,$opt{w}},$PAGE{$_}}
$if{$ne{$add{$opt{w},1},$opt{x}},...}
$map{$range{$opt{x},$add{$thispage,-1}},$PAGE{$_}}
$SPAGE{$thispage}
$map{$range{$add{$thispage,1},$opt{y}},$PAGE{$_}}
$if{$ne{$opt{y},$lastpage},...}
$NEXT
</ul>}
}}
${Hidden inputs}
$if{$dbname,<input type=hidden name=DB value="$html{$dbname}">}
$if{$ne{$topdoc,0},<input type=hidden name=TOPDOC value=$topdoc>}
$if{$ne{$hitsperpage,10},<input type=hidden name=HITSPERPAGE value=$hitsperpage>}
$if{$fmt,<input type=hidden name=FMT value="$html{$fmt}">}
$if{$cgi{COLLAPSE},<input type=hidden name=COLLAPSE value="$html{$cgi{COLLAPSE}}">}
$if{$queryterms,<input type=hidden name=xP value="$html{$queryterms}">}
<input type=hidden name=xDB value="$html{$dbname}">
<input type=hidden name=xFILTERS value="$html{$filters}">
$list{$relevants,<input type=hidden name=R value=",.,">}
$if{$cgi{THRESHOLD},<input type=hidden name=THRESHOLD value="$html{$cgi{THRESHOLD}}">}
${Preserve any B filters used - this needs modifying if you modify this template
  to have B on radio buttons, SELECT, etc}
$map{$cgilist{B},<input type=hidden name=B value="$html{$_}">}
</form>
<footer><a href="https://xapian.org/">$html{$version}</a></footer>
</body>
</html>
$log{query.log}
